#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –∏ —Å–∞–π—Ç–∞

BOT_DIR="/Users/kelemetovmuhamed/Documents/vpn_bot_test"
SITE_DIR="/Users/kelemetovmuhamed/Documents/vpnwebsite"

echo "üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ —Å–∞–π—Ç–∞"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
if [ ! -d "$BOT_DIR" ]; then
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: $BOT_DIR"
    exit 1
fi

if [ ! -d "$SITE_DIR" ]; then
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–∞–π—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: $SITE_DIR"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–æ—Ç–∞
echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–æ—Ç–∞..."
cd "$BOT_DIR" || exit 1
if [ ! -d "node_modules" ]; then
    echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–æ—Ç–∞..."
    npm install
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∞–π—Ç–∞
echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∞–π—Ç–∞..."
cd "$SITE_DIR" || exit 1
if [ ! -d "node_modules" ]; then
    echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∞–π—Ç–∞..."
    npm install
fi

# –°–æ–∑–¥–∞–Ω–∏–µ .env.local –µ—Å–ª–∏ –Ω–µ—Ç
if [ ! -f "$SITE_DIR/.env.local" ]; then
    echo "üìù –°–æ–∑–¥–∞–Ω–∏–µ .env.local..."
    echo "VITE_API_URL=http://localhost:3000" > "$SITE_DIR/.env.local"
fi

echo ""
echo "‚úÖ –í—Å–µ –≥–æ—Ç–æ–≤–æ!"
echo ""
echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo ""
echo "1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –≤ –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:"
echo "   cd $BOT_DIR && npm run dev"
echo ""
echo "2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∞–π—Ç –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:"
echo "   cd $SITE_DIR && npm run dev"
echo ""
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebApp"
echo ""

