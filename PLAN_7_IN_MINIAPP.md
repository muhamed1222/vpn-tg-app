# –õ–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ —Ç–∞—Ä–∏—Ñ–∞ –∑–∞ 10 —Ä—É–±–ª–µ–π –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## ‚úÖ –î–∞, –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–æ –≤—Å–µ–º –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### üìç –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞

#### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫—É–ø–∫–∏ (`/purchase`)
**–§–∞–π–ª:** `app/(auth)/purchase/page.tsx`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `checkHasPaidOrders()`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –∏ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
- –¢–∞—Ä–∏—Ñ—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è: `if (tariff.id === 'plan_7' && hasPaidOrders) return false`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** plan_7 –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Ç–∞—Ä–∏—Ñ–æ–≤, –µ—Å–ª–∏ –µ—Å—Ç—å –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

**–ö–æ–¥:**
```typescript
// –°—Ç—Ä–æ–∫–∏ 136-139
if (tariff.id === 'plan_7' && hasPaidOrders) {
  return false; // –°–∫—Ä—ã–≤–∞–µ–º —Ç–∞—Ä–∏—Ñ
}
```

#### 2. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏
**–§–∞–π–ª:** `components/blocks/PurchaseConfirmModal.tsx`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∫—É–ø–∏—Ç—å
- –î–∞–∂–µ –µ—Å–ª–∏ —Ç–∞—Ä–∏—Ñ –ø–æ–∫–∞–∑–∞–ª—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –∫—ç—à–∞), –ø–æ–∫—É–ø–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–ü—Ä–æ–±–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑"

**–ö–æ–¥:**
```typescript
// –°—Ç—Ä–æ–∫–∏ 138-153
if (planId === 'plan_7') {
  const payments = await api.getPaymentsHistory();
  const hasPaidOrders = payments.some(p => p.status === 'success');
  
  if (hasPaidOrders) {
    webApp.showAlert('–ü—Ä–æ–±–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.');
    return; // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–∫—É–ø–∫—É
  }
}
```

#### 3. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
**–§–∞–π–ª:** `app/(auth)/page.tsx`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã plan_7 –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è
- –≠—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "–æ—Ç 99 —Ä—É–±–ª–µ–π" (–≤–º–µ—Å—Ç–æ "–æ—Ç 10 —Ä—É–±–ª–µ–π")
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ —É—á–µ—Ç–∞ plan_7

**–ö–æ–¥:**
```typescript
// –°—Ç—Ä–æ–∫–∏ 89-90
// –ù–∞—Ö–æ–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ –≤ —Ä—É–±–ª—è—Ö (–∏—Å–∫–ª—é—á–∞—è plan_7)
const validTariffs = tariffs.filter(t => t.id !== 'plan_7');
```

## üîí –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞

### –£—Ä–æ–≤–µ–Ω—å 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –¢–∞—Ä–∏—Ñ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/purchase`

### –£—Ä–æ–≤–µ–Ω—å 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### –£—Ä–æ–≤–µ–Ω—å 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- –ë—ç–∫–µ–Ω–¥ —Ç–æ–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ plan_7
- –î–∞–∂–µ –µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç, –±—ç–∫–µ–Ω–¥ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç

## üìä –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

–í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```typescript
const checkHasPaidOrders = async () => {
  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
  const payments = await api.getPaymentsHistory();
  const hasPaidPayments = payments.some(p => p.status === 'success');
  
  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
  const statusData = await api.getUserStatus();
  const hasActiveSubscription = statusData.ok && statusData.status === 'active';
  
  // 3. –†–µ–∑—É–ª—å—Ç–∞—Ç
  return hasPaidPayments || hasActiveSubscription;
};
```

## ‚úÖ –ò—Ç–æ–≥

**–î–∞, –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–æ –≤—Å–µ–º –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**

1. ‚úÖ –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∫—É–ø–∫–∏ - —Ç–∞—Ä–∏—Ñ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è
2. ‚úÖ –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∫—É–ø–∏—Ç—å - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
3. ‚úÖ –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ - –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ —Ä–∞—Å—á–µ—Ç–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã
4. ‚úÖ –ù–∞ –±—ç–∫–µ–Ω–¥–µ - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

**–¢–∞—Ä–∏—Ñ –∑–∞ 10 —Ä—É–±–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π, –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ.**
