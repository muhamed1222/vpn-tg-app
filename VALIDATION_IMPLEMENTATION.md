# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç API

## –î–∞—Ç–∞: 2025-01-27

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–¥–µ –Ω–µ –±—ã–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç API. –û—Ç–≤–µ—Ç—ã –æ—Ç API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —á—Ç–æ –º–æ–≥–ª–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Zod - –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è runtime-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ TypeScript.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zod

```bash
npm install zod
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª:** `lib/validation/schemas.ts`

–°–æ–∑–¥–∞–Ω—ã —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö API –æ—Ç–≤–µ—Ç–æ–≤:
- ‚úÖ `UserStatusResponseSchema` - —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `UserConfigSchema` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `BillingDataSchema` - –±–∏–ª–ª–∏–Ω–≥ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `TariffsResponseSchema` - —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ `TransactionsResponseSchema` - –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ `OrderResponseSchema` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ `PaymentSuccessResponseSchema` - —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã
- ‚úÖ `ReferralStatsSchema` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚úÖ `ReferralHistoryResponseSchema` - –∏—Å—Ç–æ—Ä–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚úÖ `AutorenewalResponseSchema` - –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- ‚úÖ `ActiveContestResponseSchema` - –∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å
- ‚úÖ `ContestSummaryResponseSchema` - —Å–≤–æ–¥–∫–∞ –∫–æ–Ω–∫—É—Ä—Å–∞
- ‚úÖ `ContestFriendsResponseSchema` - –¥—Ä—É–∑—å—è –≤ –∫–æ–Ω–∫—É—Ä—Å–µ
- ‚úÖ `ContestTicketsResponseSchema` - –∏—Å—Ç–æ—Ä–∏—è –±–∏–ª–µ—Ç–æ–≤

**–í—Å–µ–≥–æ:** 14 —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª:** `lib/validation/validator.ts`

–°–æ–∑–¥–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `validateData()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- ‚úÖ `safeValidateData()` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –ø—Ä–∏ –æ—à–∏–±–∫–µ)

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ API –º–µ—Ç–æ–¥—ã

**–§–∞–π–ª:** `lib/api.ts`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã API:
- ‚úÖ `getUserConfig()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚úÖ `getUserStatus()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –±–∏–ª–ª–∏–Ω–≥
- ‚úÖ `getPaymentsHistory()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ `getTariffs()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ `getReferralStats()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚úÖ `createOrder()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
- ‚úÖ `checkPaymentSuccess()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã
- ‚úÖ `getAutorenewal()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- ‚úÖ `updateAutorenewal()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è
- ‚úÖ `getReferralHistory()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚úÖ `getActiveContest()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å
- ‚úÖ `getContestSummary()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–≤–æ–¥–∫—É –∫–æ–Ω–∫—É—Ä—Å–∞
- ‚úÖ `getContestFriends()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥—Ä—É–∑–µ–π –≤ –∫–æ–Ω–∫—É—Ä—Å–µ
- ‚úÖ `getContestTickets()` - –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –±–∏–ª–µ—Ç–æ–≤

**–í—Å–µ–≥–æ:** 14 –º–µ—Ç–æ–¥–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ö–µ–º/–§—É–Ω–∫—Ü–∏–π |
|------|------------|--------------|
| `lib/validation/schemas.ts` | –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 14 —Å—Ö–µ–º |
| `lib/validation/validator.ts` | –£—Ç–∏–ª–∏—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 2 —Ñ—É–Ω–∫—Ü–∏–∏ |

### –ó–∞–º–µ–Ω–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

- **API –º–µ—Ç–æ–¥—ã**: 14 –º–µ—Ç–æ–¥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **–ó–∞–º–µ–Ω –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤**: 14+ –∑–∞–º–µ–Ω

---

## üîç –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```typescript
const data = await apiFetch<{
  id: string;
  name: string;
  days: number;
}>('tariffs', { method: 'GET' });
// ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∏–ø—É
```

### –ü–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```typescript
const data = await apiFetch<unknown>('tariffs', { method: 'GET' });
const validatedData = validateData(schemas.TariffsResponseSchema, data, {
  endpoint: 'tariffs',
  action: 'getTariffs',
});
// ‚úÖ –î–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è runtime, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º–µ
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **Runtime-–≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: TypeScript —Ç–∏–ø—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ —Å—Ö–µ–º
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –í—Å–µ —Å—Ö–µ–º—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°—Ö–µ–º—ã —Å–ª—É–∂–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∏:

- ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä: 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –¢–µ—Å—Ç—ã: 66/66 –ø—Ä–æ–π–¥–µ–Ω–æ

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

- ‚úÖ –í—Å–µ API –º–µ—Ç–æ–¥—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –¢–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–∞–º

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**

**–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã:**
- ‚úÖ –í—Å–µ API –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é
- ‚úÖ 14 —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ 2 —É—Ç–∏–ª–∏—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –¢–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–∞–º

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Zod:

‚úÖ **14 —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏** —Å–æ–∑–¥–∞–Ω—ã  
‚úÖ **14 API –º–µ—Ç–æ–¥–æ–≤** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é  
‚úÖ **Runtime-–≤–∞–ª–∏–¥–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è  

**–ü—Ä–æ–µ–∫—Ç –∑–∞—â–∏—â–µ–Ω –æ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç API! üõ°Ô∏è**

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏*
