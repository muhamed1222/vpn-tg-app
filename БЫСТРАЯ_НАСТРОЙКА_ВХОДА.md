# Быстрая настройка входа через бота

## Данные бота

- **Username:** `@Test_outlivion_bot`
- **Токен:** `ваш_токен_бота`

## Минимальная настройка (локальная разработка)

### Шаг 1. Настройка сайта

Создайте файл `.env.local`:
```bash
echo "VITE_API_URL=http://localhost:3000" > .env.local
```

### Шаг 2. Настройка бота

В `.env` бота добавьте:
```env
TELEGRAM_BOT_TOKEN=ваш_токен_бота
TELEGRAM_USE_POLLING=1
PORT=3000
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://web.telegram.org
```

### Шаг 3. Запуск

**Терминал 1 - Бот:**
```bash
cd /path/to/vpn_bot
npm run dev
```

**Терминал 2 - Сайт:**
```bash
cd /Users/kelemetovmuhamed/Documents/vpnwebsite
npm run dev
```

### Шаг 4. Настройка WebApp URL

1. Откройте @BotFather в Telegram
2. `/mybots` → выберите `@Test_outlivion_bot` → `Bot Settings` → `Menu Button`
3. Для локальной разработки используйте туннель (ngrok/cloudflared)
4. Установите URL: `https://ваш-туннель.ngrok.io` (для локальной разработки)

### Шаг 5. Тестирование

1. Откройте бота в Telegram
2. Нажмите на кнопку WebApp
3. Нажмите "Продолжить с Telegram"
4. Должна произойти авторизация

## Проверка работоспособности

### В консоли браузера (F12)

```javascript
// Проверка Telegram WebApp
console.log('WebApp:', window.Telegram?.WebApp);
console.log('initData:', window.Telegram?.WebApp?.initData);
```

### В Network вкладке

- Запросы к `/api/me` должны иметь заголовок `Authorization`
- Ответ должен содержать данные пользователя

## Частые проблемы

| Проблема | Решение |
|----------|---------|
| "Telegram WebApp не инициализирован" | Откройте сайт через Telegram (не в браузере) |
| CORS ошибка | Добавьте домен в `ALLOWED_ORIGINS` бота |
| 401 Unauthorized | Проверьте валидацию `initData` в боте |
| API недоступен | Проверьте `VITE_API_URL` и запущен ли бот |

## Ссылки

- Подробная инструкция: `НАСТРОЙКА_ВХОДА_ЧЕРЕЗ_БОТА.md`
