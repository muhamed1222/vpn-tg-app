# üìã –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–î–∞—Ç–∞:** 17 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –§–∞–π–ª: `vpn_api/src/routes/v1/admin.ts`

#### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–æ—É—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ `adminApiKey`)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `verifyAdmin` (–ø—Ä–æ–≤–µ—Ä–∫–∞ `request.user`, `isAdmin`, –∑–∞–≥–æ–ª–æ–≤–∫–∏)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∑–∞–ø—Ä–æ—Å–∞ (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω `verifyAdmin` —Å `void` –Ω–∞ `async Promise<void>` (—á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–∑—ã–≤–∞–ª—Å—è)

#### –ò–∑–º–µ–Ω–µ–Ω–æ:
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä—Å–∞: –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–Ω–∫—É—Ä—Å –Ω–∞–ø—Ä—è–º—É—é –ø–æ ID –∏–∑ –ë–î, –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞—Ç
  - **–ü—Ä–∏—á–∏–Ω–∞:** `getActiveContest` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞—Ç—ã (`starts_at <= now`), –∞ –∫–æ–Ω–∫—É—Ä—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è 20 —è–Ω–≤–∞—Ä—è
  - **–†–µ—à–µ–Ω–∏–µ:** –î–ª—è –∞–¥–º–∏–Ω–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—É—Ä—Å –ø–æ ID –∏ `is_active = 1`, –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞—Ç

#### –ù–ï —É–¥–∞–ª–µ–Ω–æ:
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –æ—Å—Ç–∞–ª–∞—Å—å
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Å—Ç–∞–ª–∞—Å—å

---

### 2. –§–∞–π–ª: `vpn_api/src/server.ts`

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã `fastify.decorate` –¥–ª—è `authJwtSecret` –∏ `authCookieName`
  - **–ë—ã–ª–æ:** –î—É–±–ª–∏–∫–∞—Ç—ã –≤—ã–∑—ã–≤–∞–ª–∏ –æ—à–∏–±–∫—É `FST_ERR_DEC_ALREADY_PRESENT`
  - **–°—Ç–∞–ª–æ:** –ö–∞–∂–¥—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω –æ–¥–∏–Ω —Ä–∞–∑

#### –ò–∑–º–µ–Ω–µ–Ω–æ:
- ‚úÖ –£–ª—É—á—à–µ–Ω –ø—É—Ç—å –∫ `.env` —Ñ–∞–π–ª—É (—è–≤–Ω—ã–π –ø—É—Ç—å —á–µ—Ä–µ–∑ `process.cwd()`)

#### –ù–ï —É–¥–∞–ª–µ–Ω–æ:
- ‚úÖ –í—Å–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–∞—Å—å

---

### 3. –§–∞–π–ª: `vpn_api/src/routes/v1/payments.ts`

#### –ò–∑–º–µ–Ω–µ–Ω–æ:
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω —Ö–∞—Ä–¥–∫–æ–¥ `chat_id: 7972426786` –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ADMIN_ID` –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - **–ë—ã–ª–æ:** `chat_id: 7972426786` (—Ö–∞—Ä–¥–∫–æ–¥)
  - **–°—Ç–∞–ª–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–≤—ã–π ID –∏–∑ `ADMIN_ID` (—Ç–µ–ø–µ—Ä—å `782245481`)

#### –ù–ï —É–¥–∞–ª–µ–Ω–æ:
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Å—Ç–∞–ª–∞—Å—å

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Frontend

### 1. –§–∞–π–ª: `app/api/contest/active/route.ts`
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø—É—Ç—å –∫ Backend API: `/api/contest/active` ‚Üí `/v1/contest/active`

### 2. –§–∞–π–ª: `app/api/admin/contest/participants/route.ts`
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø—É—Ç—å –∫ Backend API: `/api/admin/contest/participants` ‚Üí `/v1/admin/contest/participants`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 3. –§–∞–π–ª: `next.config.ts`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ CSP –¥–ª—è `vercel.live` (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `VERCEL_ENV`)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞: –ß—Ç–æ –ù–ï –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ

### Backend API (`vpn_api/`):
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Å—Ç–∞–ª–∞—Å—å
- ‚úÖ –í—Å–µ —ç–∫—Å–ø–æ—Ä—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å

### Frontend (`vpnwebsite/`):
- ‚úÖ –í—Å–µ API routes –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
1. Backend API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å `x-admin-api-key`
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
3. –ö–æ–Ω–∫—É—Ä—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ë–î (–¥–∞–∂–µ –µ—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª—Å—è)
4. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ –ë–î
5. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç: `{"tickets":[]}`

### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –í—Å–µ –≤–∞–∂–Ω—ã–µ —à–∞–≥–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

---

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   - –û—Ç–∫—Ä—ã—Ç—å: `https://my.outlivion.space/admin/contest`
   - –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å: `A246123b`
   - –î–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Backend API:**
   ```bash
   ssh root@72.56.93.135
   journalctl -u outlivion-api -f
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é:**
   ```bash
   curl "https://api.outlivion.space/v1/admin/contest/participants?contest_id=550e8400-e29b-41d4-a716-446655440000" \
     -H "x-admin-api-key: A246123b"
   ```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –Ω–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª–µ–Ω–æ, –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
